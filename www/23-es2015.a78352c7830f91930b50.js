(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{ofdr:function(n,l,e){"use strict";e.r(l);var t=e("8Y7J");class i{}var s=e("pMnS"),r=e("MKJQ"),u=e("sZkV"),c=e("SVse"),o=e("s7LF"),a=e("mrSG"),b=e("/lBd"),h=e("DMZm"),p=e("mpJo"),d=e("n90K"),g=e("2rUM"),m=e("P64T");class v{constructor(n,l,e,t,i,s,r,u,c){this.activateRoute=n,this.subscriptionsService=l,this.referencesService=e,this.adsService=t,this.coreService=i,this.storageService=s,this.translatesService=r,this.pickerController=u,this.cdr=c,this.subscriptionsYears=[],this.settings=[]}trackByFn(n){return n}ngOnInit(){return a.__awaiter(this,void 0,void 0,(function*(){this.id=this.activateRoute.snapshot.params.id,this.category=this.referencesService.getByCategory(this.id),this.subscriptions=yield this.subscriptionsService.getCache(),this.subscriptions&&this.setToggles(),this.subscriptions=yield this.subscriptionsService.get(),this.setToggles()}))}setToggles(){this.subscriptions.forEach(n=>{this.subscriptionsYears[n.category]={min:n.min?n.min:(new Date).getFullYear()-100,max:n.min?n.max:(new Date).getFullYear()}}),this.subscriptions=this.subscriptions.map(n=>n.category),this.settings=this.category.models.map(n=>this.subscriptions.includes(this.subscriptionsService.transliterate(`${this.category.name}_${n}`)))}checkYears(n){return this.subscriptionsYears[this.subscriptionsService.transliterate(`${this.category.name}_${n}`)]}changeSubscription(n,l,e){return a.__awaiter(this,void 0,void 0,(function*(){if(n.target.checked)yield this.subscriptionsService.delete(`${this.category.name}_${l}`);else{const n=(new Date).getFullYear()-100,e=(new Date).getFullYear();this.subscriptionsYears[this.subscriptionsService.transliterate(`${this.category.name}_${l}`)]={min:n,max:e},yield this.subscriptionsService.add(`${this.category.name}_${l}`,n,e)}yield this.adsService.getAll(),this.settings[e]=n.target.checked,this.cdr.detectChanges()}))}openChangeYears(n){return a.__awaiter(this,void 0,void 0,(function*(){const l=this.subscriptionsYears[this.subscriptionsService.transliterate(`${this.category.name}_${n}`)];let e=[];const t=(new Date).getFullYear();for(let n=t;n>=t-100;n--)e.push({text:n.toString(),value:n});let i=[];for(let n=t;n>=t-100;n--)i.push({text:n.toString(),value:n});const s=yield this.pickerController.create({columns:[{name:"min",options:e,selectedIndex:t-l.min},{name:"max",options:i,selectedIndex:t-l.max}],buttons:[{text:this.translatesService.getWord("Cancel"),role:"cancel"},{text:this.translatesService.getWord("Ok"),handler:l=>{l.max.value<l.min.value?(this.coreService.presentToast("subscriptionErrorDate","danger",5e3),this.openChangeYears(n)):(this.subscriptionsService.setYearSub(`${this.category.name}_${n}`,l.min.value,l.max.value),this.subscriptionsYears[this.subscriptionsService.transliterate(`${this.category.name}_${n}`)]={min:l.min.value,max:l.max.value},this.cdr.detectChanges())}}]});yield s.present()}))}}var f=e("iInd"),x=t.ob({encapsulation:0,styles:[[""]],data:{}});function k(n){return t.Mb(0,[(n()(),t.qb(0,0,null,null,3,"span",[["style","background: #d0d0d050;padding: 5px; border-radius: 10px;font-size: 11px;vertical-align: middle;color: var(--ion-color-primary);"]],null,null,null,null,null)),(n()(),t.Kb(1,null,[" "," - "," "])),(n()(),t.qb(2,0,null,null,1,"ion-icon",[["name","chevron-down"],["style","vertical-align: text-bottom;"]],null,null,null,r.ib,r.q)),t.pb(3,49152,null,0,u.D,[t.h,t.k,t.x],{name:[0,"name"]},null)],(function(n,l){n(l,3,0,"chevron-down")}),(function(n,l){var e=l.component;n(l,1,0,e.checkYears(l.parent.context.$implicit).min,e.checkYears(l.parent.context.$implicit).max)}))}function y(n){return t.Mb(0,[(n()(),t.qb(0,0,null,null,12,"ion-item",[],null,null,null,r.mb,r.u)),t.pb(1,49152,null,0,u.I,[t.h,t.k,t.x],null,null),(n()(),t.qb(2,0,null,0,2,"ion-label",[],null,null,null,r.nb,r.v)),t.pb(3,49152,null,0,u.O,[t.h,t.k,t.x],null,null),(n()(),t.Kb(4,0,["",""])),(n()(),t.qb(5,0,null,0,3,"ion-label",[["style","text-align: right;margin-right: 10px;"]],[[8,"hidden",0]],[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.openChangeYears(n.context.$implicit)&&t),t}),r.nb,r.v)),t.pb(6,49152,null,0,u.O,[t.h,t.k,t.x],null,null),(n()(),t.fb(16777216,null,0,1,null,k)),t.pb(8,16384,null,0,c.l,[t.N,t.J],{ngIf:[0,"ngIf"]},null),(n()(),t.qb(9,0,null,0,3,"ion-toggle",[["color","primary"],["mode","ios"]],null,[[null,"click"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var i=!0,s=n.component;return"ionBlur"===l&&(i=!1!==t.Cb(n,12)._handleBlurEvent(e.target)&&i),"ionChange"===l&&(i=!1!==t.Cb(n,12)._handleIonChange(e.target)&&i),"click"===l&&(i=!1!==s.changeSubscription(e,n.context.$implicit,n.context.index)&&i),i}),r.Hb,r.P)),t.Hb(5120,null,o.e,(function(n){return[n]}),[u.d]),t.pb(11,49152,null,0,u.zb,[t.h,t.k,t.x],{checked:[0,"checked"],color:[1,"color"],mode:[2,"mode"]},null),t.pb(12,4341760,null,0,u.d,[t.p,t.k],null,null)],(function(n,l){var e=l.component;n(l,8,0,e.checkYears(l.context.$implicit)),n(l,11,0,e.settings[l.context.index],"primary","ios")}),(function(n,l){var e=l.component;n(l,4,0,l.context.$implicit),n(l,5,0,!e.settings[l.context.index])}))}function S(n){return t.Mb(0,[(n()(),t.qb(0,0,null,null,11,"ion-header",[],null,null,null,r.hb,r.p)),t.pb(1,49152,null,0,u.C,[t.h,t.k,t.x],null,null),(n()(),t.qb(2,0,null,0,9,"ion-toolbar",[],null,null,null,r.Ib,r.Q)),t.pb(3,49152,null,0,u.Ab,[t.h,t.k,t.x],null,null),(n()(),t.qb(4,0,null,0,2,"ion-title",[],null,null,null,r.Gb,r.O)),t.pb(5,49152,null,0,u.yb,[t.h,t.k,t.x],null,null),(n()(),t.Kb(6,0,["",""])),(n()(),t.qb(7,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,r.W,r.e)),t.pb(8,49152,null,0,u.m,[t.h,t.k,t.x],null,null),(n()(),t.qb(9,0,null,0,2,"ion-back-button",[["defaultHref","/"]],null,[[null,"click"]],(function(n,l,e){var i=!0;return"click"===l&&(i=!1!==t.Cb(n,11).onClick(e)&&i),i}),r.T,r.b)),t.pb(10,49152,null,0,u.h,[t.h,t.k,t.x],{defaultHref:[0,"defaultHref"]},null),t.pb(11,16384,null,0,u.i,[[2,u.gb],u.Gb,u.e],{defaultHref:[0,"defaultHref"]},null),(n()(),t.qb(12,0,null,null,5,"ion-content",[["fullscreen",""]],null,null,null,r.db,r.l)),t.pb(13,49152,null,0,u.v,[t.h,t.k,t.x],{fullscreen:[0,"fullscreen"]},null),(n()(),t.qb(14,0,null,0,3,"ion-list",[["lines","full"]],null,null,null,r.pb,r.w)),t.pb(15,49152,null,0,u.P,[t.h,t.k,t.x],{lines:[0,"lines"]},null),(n()(),t.fb(16777216,null,0,1,null,y)),t.pb(17,278528,null,0,c.k,[t.N,t.J,t.q],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(n,l){var e=l.component;n(l,10,0,"/"),n(l,11,0,"/"),n(l,13,0,""),n(l,15,0,"full"),n(l,17,0,e.category.models,e.trackByFn)}),(function(n,l){n(l,6,0,l.component.category.name)}))}function $(n){return t.Mb(0,[(n()(),t.qb(0,0,null,null,1,"app-subscription-detail",[],null,null,null,S,x)),t.pb(1,114688,null,0,v,[f.a,h.a,b.a,p.a,m.a,d.a,g.a,u.Hb,t.h],null,null)],(function(n,l){n(l,1,0)}),null)}var Y=t.mb("app-subscription-detail",v,$,{},{},[]);class C{}e.d(l,"SubscriptionDetailPageModuleNgFactory",(function(){return w}));var w=t.nb(i,[],(function(n){return t.zb([t.Ab(512,t.j,t.Y,[[8,[s.a,Y]],[3,t.j],t.v]),t.Ab(4608,c.n,c.m,[t.s,[2,c.y]]),t.Ab(4608,o.j,o.j,[]),t.Ab(4608,u.c,u.c,[t.x,t.g]),t.Ab(4608,u.Fb,u.Fb,[u.c,t.j,t.p]),t.Ab(4608,u.Jb,u.Jb,[u.c,t.j,t.p]),t.Ab(1073742336,c.c,c.c,[]),t.Ab(1073742336,o.i,o.i,[]),t.Ab(1073742336,o.c,o.c,[]),t.Ab(1073742336,u.Cb,u.Cb,[]),t.Ab(1073742336,f.p,f.p,[[2,f.u],[2,f.n]]),t.Ab(1073742336,C,C,[]),t.Ab(1073742336,i,i,[]),t.Ab(1024,f.l,(function(){return[[{path:"",component:v}]]}),[])])}))}}]);