function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,l=new Array(n);t<n;t++)l[t]=e[t];return l}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var l=n[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"22TP":function(e,n,t){"use strict";t.r(n);var l,r=t("8Y7J"),i=function e(){_classCallCheck(this,e)},a=t("pMnS"),u=t("SVse"),o=t("MKJQ"),s=t("sZkV"),c=t("s7LF"),b=t("TSSN"),h=t("mrSG"),p=t("Hzbo"),d=t("4Em8"),f=t("lGQG"),g=t("2Vo4"),m=t("GJmQ"),v=t("SxV6"),x=t("P64T"),y=t("kXdw"),k=t("Pn9U"),C=t("t8sF"),_=t("AcVp"),w=t("2rUM"),M=t("jT/F"),I=t("EFqu"),P=t("A5Ws"),A=(t("HXCw"),t("cUpR")),S=((l=function(){function e(n,t){_classCallCheck(this,e),this.cache=n,this.sanitizer=t,this.defaultTTl=604800,this.IMG_GROUP_KEY="IMG",this.cache.setDefaultTTL(this.defaultTTl),this.cache.clearExpired()}return _createClass(e,[{key:"loadFromObservable",value:function(e,n,t,l){return this.cache.loadFromObservable(e,n,t,l)}},{key:"cacheImageByUrl",value:function(e,n){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=n||e,t.prev=1,t.t0=this.sanitizer,t.next=5,this.cache.getItem(n);case 5:return t.t1=t.sent,t.abrupt("return",t.t0.bypassSecurityTrustResourceUrl.call(t.t0,t.t1));case 9:return t.prev=9,t.t2=t.catch(1),t.next=13,this.createImageCache(n,e);case 13:return l=t.sent,t.abrupt("return",this.sanitizer.bypassSecurityTrustResourceUrl(l));case 15:case"end":return t.stop()}}),t,this,[[1,9]])})))}},{key:"cacheImageChat",value:function(e,n){var t=n.data,l=n.url;return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=this.sanitizer,n.next=4,this.cache.getItem(e);case 4:return n.t1=n.sent,n.abrupt("return",n.t0.bypassSecurityTrustResourceUrl.call(n.t0,n.t1));case 8:if(n.prev=8,n.t2=n.catch(0),!t){n.next=20;break}return n.next=13,this.cache.saveItem(e,t,this.IMG_GROUP_KEY);case 13:return n.t4=this.sanitizer,n.next=16,this.cache.getItem(e);case 16:n.t5=n.sent,n.t3=n.t4.bypassSecurityTrustResourceUrl.call(n.t4,n.t5),n.next=25;break;case 20:return n.t6=this.sanitizer,n.next=23,this.createImageCache(e,l);case 23:n.t7=n.sent,n.t3=n.t6.bypassSecurityTrustResourceUrl.call(n.t6,n.t7);case 25:return n.abrupt("return",n.t3);case 26:case"end":return n.stop()}}),n,this,[[0,8]])})))}},{key:"createImageCache",value:function(e,n){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.convertImageToBase64(n);case 2:return l=t.sent,t.next=5,this.cache.saveItem(e,l,this.IMG_GROUP_KEY);case 5:return t.next=7,this.cache.getItem(e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"convertImageToBase64",value:function(e){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,l,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return t=n.sent,n.next=5,t.blob();case 5:return l=n.sent,r=new Promise((function(e,n){var t=new FileReader;t.onloadend=function(){return e(t.result)},t.onerror=function(){return n},t.readAsDataURL(l)})),n.next=9,r;case 9:return n.abrupt("return",n.sent);case 10:case"end":return n.stop()}}),n)})))}}]),e}()).ngInjectableDef=r.Qb({factory:function(){return new l(r.Rb(P.a),r.Rb(A.b))},token:l,providedIn:"root"}),l),R=function(){function e(n,t,l,r,i,a,u,o,s,c,b,h,p,d,f,m,v){_classCallCheck(this,e),this.activateRoute=n,this.messagesService=t,this.authService=l,this.coreService=r,this.ngZone=i,this.cdr=a,this.sellersService=u,this.platform=o,this.camera=s,this.file=c,this.backgroundMode=b,this.actionSheetController=h,this.translatesService=p,this.uploadService=d,this.modalController=f,this.loadingController=m,this.cacheService=v,this.loaded=!1,this.paused=!1,this.alive=!0,this.text="",this.messages=new g.a([]),this.options={quality:50,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,targetWidth:800,targetHeight:800,correctOrientation:!0},this.optionsBackground={id:-1,title:this.translatesService.getWord("Load"),text:this.translatesService.getWord("WaitImage"),hidden:!1,silent:!1,sticky:!0,resume:!1,foreground:!0}}return _createClass(e,[{key:"trackByFn",value:function(e,n){return n._id.toString()}},{key:"ionViewWillEnter",value:function(){this.adId=this.activateRoute.snapshot.params.ad,this.offerId=this.activateRoute.snapshot.params.offer,this.to=this.activateRoute.snapshot.params.to,this.myUid=this.authService.getLogin(),this.initMessages(),this.onResume(),this.onPause()}},{key:"ionViewWillLeave",value:function(){this.alive=!1}},{key:"initMessages",value:function(){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sellersService.getByUid(this.to).then((function(e){n.userName=e.name?e.name:""})),e.t0=this.messages,e.next=4,this.messagesService.getMessages(this.offerId);case 4:return e.t1=e.sent,e.t0.next.call(e.t0,e.t1),this.loaded=!0,this.scrollNewMessage(),e.next=10,this.messagesService.setReadOffer(this.offerId);case 10:this.messagesService.watch(this.offerId).pipe(Object(m.a)((function(){return n.alive}))).subscribe((function(e){var t=e.fullDocument;n.ngZone.run((function(){if("insert"==e.operationType)n.messages.next([].concat(_toConsumableArray(n.messages.getValue()),[t])),t.to!=n.myUid||n.paused||n.messagesService.setReadOffer(n.offerId,t);else if("update"==e.operationType){var l=n.messages.getValue().map((function(e){return e._id.toString()==t._id.toString()?t:e}));n.messages.next(l)}})),n.cdr.detectChanges(),n.scrollNewMessage()}));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"onResume",value:function(){var e=this;this.coreService.onResume().pipe(Object(m.a)((function(){return e.alive}))).subscribe((function(){e.paused=!1,e.messagesService.setReadOffer(e.offerId)}))}},{key:"onPause",value:function(){var e=this;this.coreService.onPause().pipe(Object(m.a)((function(){return e.alive}))).subscribe((function(){e.paused=!0}))}},{key:"scrollNewMessage",value:function(){this.content.scrollToPoint(0,5e4,500)}},{key:"send",value:function(e,n){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(l=new d.a).ad=this.adId,l.to=this.to,l.offer=this.offerId,l.text=e,l.img=n,this.text="",t.next=9,this.messagesService.add(l);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"actionSheetChoiceFile",value:function(){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.platform.is("cordova")){e.next=8;break}return e.next=3,this.actionSheetController.create({header:this.translatesService.getWord("PhotoSource"),buttons:[{text:this.translatesService.getWord("Camera"),icon:"camera",handler:function(){t.selectImage(t.camera.PictureSourceType.CAMERA)}},{text:this.translatesService.getWord("Album"),icon:"image",handler:function(){t.selectImage(t.camera.PictureSourceType.PHOTOLIBRARY)}},{text:this.translatesService.getWord("Cancel"),icon:"close",role:"cancel"}]});case 3:return n=e.sent,e.next=6,n.present();case 6:e.next=9;break;case 8:this.fileUploadWeb.nativeElement.click();case 9:case"end":return e.stop()}}),e,this)})))}},{key:"selectImage",value:function(e){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.backgroundMode.setDefaults(this.optionsBackground),this.backgroundMode.enable(),this.options.sourceType=e,this.options.allowEdit=e===this.camera.PictureSourceType.PHOTOLIBRARY,this.camera.getPicture(this.options).then((function(e){return h.__awaiter(t,void 0,void 0,regeneratorRuntime.mark((function n(){var t,l=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.makeFileIntoBlob(e);case 2:t=n.sent,this.returnFile(t.imgBlob),setTimeout((function(){l.backgroundMode.disable()}),2e3);case 4:case"end":return n.stop()}}),n,this)})))})).catch((function(){setTimeout((function(){t.backgroundMode.disable()}),2e3)}));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"makeFileIntoBlob",value:function(e){var n=this;return new Promise((function(t,l){var r="";n.file.resolveLocalFilesystemUrl(e).then((function(e){var t=e.name,l=e.nativeURL,i=l.substring(0,l.lastIndexOf("/"));return r=t,n.file.readAsArrayBuffer(i,t)})).then((function(e){var n=new Blob([e],{type:"image/jpeg"});t({fileName:r,imgBlob:n})})).catch((function(e){return l(e)}))}))}},{key:"returnFile",value:function(e){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.presentLoading();case 2:this.uploadService.pushFileToStorage(e),this.uploadService.completed$.pipe(Object(v.a)()).subscribe((function(e){t.send(e,!0),t.loadingController.dismiss()}));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"presentLoading",value:function(){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:this.translatesService.getWord("Load"),translucent:!0,backdropDismiss:!1});case 2:(t=e.sent).present().then((function(){n=l.platform.backButton.subscribeWithPriority(1,(function(){}))})),t.onDidDismiss().then((function(){n.unsubscribe()}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"openPreview",value:function(e){return h.__awaiter(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:I.a,componentProps:{img:e}});case 2:return t=n.sent,n.next=5,t.present();case 5:case"end":return n.stop()}}),n,this)})))}},{key:"callPhone",value:function(){window.location.href="tel:+"+this.activateRoute.snapshot.queryParams.phone}}]),e}(),O=t("iInd"),T=r.ob({encapsulation:0,styles:[['.content[_ngcontent-%COMP%]{--offset-bottom:-65px!important}.scroll-content[_ngcontent-%COMP%]{display:flex}ion-footer[_ngcontent-%COMP%]{position:fixed!important;bottom:0!important;background:#fff;height:60px!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{width:100%}ion-footer[_ngcontent-%COMP%]   ion-toolbar.ios[_ngcontent-%COMP%]{padding-top:7px}.chat-status[_ngcontent-%COMP%]{min-height:49px;margin:0 auto;padding-top:15px}.chat-status[_ngcontent-%COMP%]   .chat-date[_ngcontent-%COMP%]{display:block;font-size:10px;font-style:italic;color:#fff;text-shadow:0 -1px 0 #222,0 1px 0 #aaa;height:15px;left:10%;right:10%}.chat-status[_ngcontent-%COMP%]   .chat-content-center[_ngcontent-%COMP%]{padding:5px 10px;background-color:#e1e1f7;border-radius:6px;font-size:12px;color:#555;height:34px;left:10%;right:10%}.chat-message[_ngcontent-%COMP%]{width:80%;min-height:40px}.chat-message[_ngcontent-%COMP%]   .right-bubble[_ngcontent-%COMP%]{position:relative;background:#deebff;border-top-left-radius:.4em;border-bottom-left-radius:.4em;border-bottom-right-radius:.4em;padding:5px 10px 10px;left:15%}.chat-message[_ngcontent-%COMP%]   .right-bubble[_ngcontent-%COMP%]   span.msg-date[_ngcontent-%COMP%]{font-size:10px}.chat-message[_ngcontent-%COMP%]   .right-bubble[_ngcontent-%COMP%]:after{content:"";position:absolute;right:0;top:0;width:0;height:0;border:27px solid transparent;border-left-color:#deebff;border-right:0;border-top:0;margin-top:-13.5px;margin-right:-27px}.chat-message[_ngcontent-%COMP%]   .left-bubble[_ngcontent-%COMP%]{position:relative;background:#f1f1f1;border-top-right-radius:.4em;border-bottom-left-radius:.4em;border-bottom-right-radius:.4em;padding:5px 10px 10px;left:5%}.chat-message[_ngcontent-%COMP%]   .left-bubble[_ngcontent-%COMP%]   span.msg-date[_ngcontent-%COMP%]{font-size:10px}.chat-message[_ngcontent-%COMP%]   .left-bubble[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;width:0;height:0;border:27px solid transparent;border-right-color:#f1f1f1;border-left:0;border-top:0;margin-top:-13.5px;margin-left:-27px}.dot[_ngcontent-%COMP%]{height:10px;width:10px;background:#10dc60;border-radius:50%;float:left;bottom:10px;position:relative}.image[_ngcontent-%COMP%]{height:200px;border-radius:.4em}']],data:{}});function q(e){return r.Mb(0,[(e()(),r.qb(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),r.qb(1,0,null,null,2,"span",[["class","msg-date"]],null,null,null,null,null)),(e()(),r.Kb(2,null,["",""])),r.Gb(3,2),(e()(),r.qb(4,0,null,null,1,"p",[["class","ion-text-wrap"],["style","margin: 0;"]],null,null,null,null,null)),(e()(),r.Kb(5,null,["",""]))],null,(function(e,n){var t=r.Lb(n,2,0,e(n,3,0,r.Cb(n.parent.parent.parent,0),n.parent.context.$implicit.dateCreate,"dd.MM.y HH:mm"));e(n,2,0,t),e(n,5,0,n.parent.context.$implicit.text)}))}function U(e){return r.Mb(0,[(e()(),r.qb(0,0,null,null,9,"div",[],null,null,null,null,null)),r.Hb(512,null,u.v,u.w,[r.k,r.r,r.B]),r.pb(2,278528,null,0,u.o,[u.v],{ngStyle:[0,"ngStyle"]},null),r.Fb(3,{height:0}),(e()(),r.qb(4,0,null,null,5,"ion-thumbnail",[["style","display: inline;"]],null,null,null,o.Fb,o.N)),r.pb(5,49152,null,0,s.xb,[r.h,r.k,r.x],null,null),(e()(),r.qb(6,0,null,0,3,"img",[["class","image"]],[[8,"src",4]],[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.openPreview(e.parent.context.$implicit.text)&&l),l}),null,null)),r.Hb(512,null,u.v,u.w,[r.k,r.r,r.B]),r.pb(8,278528,null,0,u.o,[u.v],{ngStyle:[0,"ngStyle"]},null),r.Fb(9,{"margin-bottom":0})],(function(e,n){var t=n.component,l=e(n,3,0,0==n.parent.context.$implicit.isRead&&n.parent.context.$implicit.to!==t.myUid?"220px":"200px");e(n,2,0,l);var r=e(n,9,0,0==n.parent.context.$implicit.isRead&&n.parent.context.$implicit.to!==t.myUid?"10px":"0");e(n,8,0,r)}),(function(e,n){e(n,6,0,n.parent.context.$implicit.text)}))}function F(e){return r.Mb(0,[(e()(),r.qb(0,0,null,null,0,"div",[["class","dot"]],null,null,null,null,null))],null,null)}function B(e){return r.Mb(0,[(e()(),r.qb(0,0,null,null,13,null,null,null,null,null,null,null)),(e()(),r.qb(1,0,null,null,12,"ion-item",[["lines","none"],["style","margin: 5px 0;"]],null,null,null,o.mb,o.u)),r.pb(2,49152,null,0,s.I,[r.h,r.k,r.x],{lines:[0,"lines"]},null),(e()(),r.qb(3,0,null,0,10,"div",[["class","chat-message"]],null,null,null,null,null)),r.Hb(512,null,u.t,u.u,[r.q,r.r,r.k,r.B]),r.pb(5,278528,null,0,u.j,[u.t],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),r.qb(6,0,null,null,7,"div",[],null,null,null,null,null)),r.Hb(512,null,u.t,u.u,[r.q,r.r,r.k,r.B]),r.pb(8,278528,null,0,u.j,[u.t],{ngClass:[0,"ngClass"]},null),(e()(),r.fb(16777216,null,null,1,null,q)),r.pb(10,16384,null,0,u.l,[r.N,r.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),r.fb(0,[["img",2]],null,0,null,U)),(e()(),r.fb(16777216,null,null,1,null,F)),r.pb(13,16384,null,0,u.l,[r.N,r.J],{ngIf:[0,"ngIf"]},null)],(function(e,n){var t=n.component;e(n,2,0,"none"),e(n,5,0,"chat-message",n.context.$implicit.to!==t.myUid?"ion-text-right":"ion-text-left"),e(n,8,0,n.context.$implicit.to!==t.myUid?"right-bubble":"left-bubble"),e(n,10,0,!n.context.$implicit.img,r.Cb(n,11)),e(n,13,0,0==n.context.$implicit.isRead&&n.context.$implicit.to!==t.myUid)}),null)}function E(e){return r.Mb(0,[(e()(),r.qb(0,0,null,null,3,null,null,null,null,null,null,null)),(e()(),r.fb(16777216,null,null,2,null,B)),r.pb(2,278528,null,0,u.k,[r.N,r.J,r.q],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),r.Eb(131072,u.b,[r.h]),(e()(),r.fb(0,null,null,0))],(function(e,n){var t=n.component;e(n,2,0,r.Lb(n,2,0,r.Cb(n,3).transform(t.messages)),t.trackByFn)}),null)}function j(e){return r.Mb(0,[(e()(),r.qb(0,0,null,null,2,"p",[["class","spinnerCenter"]],null,null,null,null,null)),(e()(),r.qb(1,0,null,null,1,"ion-spinner",[["color","primary"]],null,null,null,o.zb,o.H)),r.pb(2,49152,null,0,s.qb,[r.h,r.k,r.x],{color:[0,"color"]},null)],(function(e,n){e(n,2,0,"primary")}),null)}function z(e){return r.Mb(0,[r.Eb(0,u.e,[r.s]),r.Ib(671088640,1,{content:0}),r.Ib(671088640,2,{fileUploadWeb:0}),(e()(),r.qb(3,0,null,null,11,"ion-header",[],null,null,null,o.hb,o.p)),r.pb(4,49152,null,0,s.C,[r.h,r.k,r.x],null,null),(e()(),r.qb(5,0,null,0,9,"ion-toolbar",[],null,null,null,o.Ib,o.Q)),r.pb(6,49152,null,0,s.Ab,[r.h,r.k,r.x],null,null),(e()(),r.qb(7,0,null,0,2,"ion-title",[],null,null,null,o.Gb,o.O)),r.pb(8,49152,null,0,s.yb,[r.h,r.k,r.x],null,null),(e()(),r.Kb(9,0,["",""])),(e()(),r.qb(10,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,o.W,o.e)),r.pb(11,49152,null,0,s.m,[r.h,r.k,r.x],null,null),(e()(),r.qb(12,0,null,0,2,"ion-back-button",[["defaultHref","/"]],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==r.Cb(e,14).onClick(t)&&l),l}),o.T,o.b)),r.pb(13,49152,null,0,s.h,[r.h,r.k,r.x],{defaultHref:[0,"defaultHref"]},null),r.pb(14,16384,null,0,s.i,[[2,s.gb],s.Gb,s.e],{defaultHref:[0,"defaultHref"]},null),(e()(),r.qb(15,0,null,null,6,"ion-content",[["fullscreen",""]],null,null,null,o.db,o.l)),r.pb(16,49152,[[1,4],["content",4]],0,s.v,[r.h,r.k,r.x],{fullscreen:[0,"fullscreen"]},null),(e()(),r.qb(17,0,null,0,4,"ion-list",[["mode","ios"],["style","padding-bottom: 60px;"]],null,null,null,o.pb,o.w)),r.pb(18,49152,null,0,s.P,[r.h,r.k,r.x],{mode:[0,"mode"]},null),(e()(),r.fb(16777216,null,0,1,null,E)),r.pb(20,16384,null,0,u.l,[r.N,r.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(e()(),r.fb(0,[["loading",2]],0,0,null,j)),(e()(),r.qb(22,0,null,null,29,"ion-footer",[],null,null,null,o.gb,o.o)),r.pb(23,49152,null,0,s.A,[r.h,r.k,r.x],null,null),(e()(),r.qb(24,0,null,0,27,"ion-toolbar",[],null,null,null,o.Ib,o.Q)),r.pb(25,49152,null,0,s.Ab,[r.h,r.k,r.x],null,null),(e()(),r.qb(26,0,null,0,9,"ion-buttons",[["slot","start"]],null,null,null,o.W,o.e)),r.pb(27,49152,null,0,s.m,[r.h,r.k,r.x],null,null),(e()(),r.qb(28,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.actionSheetChoiceFile()&&l),l}),o.V,o.d)),r.pb(29,49152,null,0,s.l,[r.h,r.k,r.x],null,null),(e()(),r.qb(30,0,null,0,1,"ion-icon",[["name","camera"],["size","large"]],null,null,null,o.ib,o.q)),r.pb(31,49152,null,0,s.D,[r.h,r.k,r.x],{name:[0,"name"],size:[1,"size"]},null),(e()(),r.qb(32,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(e,n,t){var l=!0;return"click"===n&&(l=!1!==e.component.callPhone()&&l),l}),o.V,o.d)),r.pb(33,49152,null,0,s.l,[r.h,r.k,r.x],null,null),(e()(),r.qb(34,0,null,0,1,"ion-icon",[["name","call"],["size","large"]],null,null,null,o.ib,o.q)),r.pb(35,49152,null,0,s.D,[r.h,r.k,r.x],{name:[0,"name"],size:[1,"size"]},null),(e()(),r.qb(36,0,null,0,9,"ion-buttons",[["style","margin-left: 5px;border-radius: 10px;border: 1px solid #CBCBCB;"]],null,null,null,o.W,o.e)),r.pb(37,49152,null,0,s.m,[r.h,r.k,r.x],null,null),(e()(),r.qb(38,0,null,0,7,"ion-textarea",[["rows","1"],["style","margin: 0;padding-left: 10px;padding-right: 5px;"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(e,n,t){var l=!0,i=e.component;return"ionBlur"===n&&(l=!1!==r.Cb(e,39)._handleBlurEvent(t.target)&&l),"ionChange"===n&&(l=!1!==r.Cb(e,39)._handleInputEvent(t.target)&&l),"ngModelChange"===n&&(l=!1!==(i.text=t)&&l),l}),o.Eb,o.M)),r.pb(39,4341760,null,0,s.Mb,[r.p,r.k],null,null),r.Hb(1024,null,c.e,(function(e){return[e]}),[s.Mb]),r.pb(41,671744,null,0,c.h,[[8,null],[8,null],[8,null],[6,c.e]],{model:[0,"model"]},{update:"ngModelChange"}),r.Hb(2048,null,c.f,null,[c.h]),r.pb(43,16384,null,0,c.g,[[4,c.f]],null,null),r.pb(44,49152,null,0,s.wb,[r.h,r.k,r.x],{placeholder:[0,"placeholder"],rows:[1,"rows"]},null),r.Eb(131072,b.l,[b.m,r.h]),(e()(),r.qb(46,0,null,0,5,"ion-buttons",[["slot","end"]],null,null,null,o.W,o.e)),r.pb(47,49152,null,0,s.m,[r.h,r.k,r.x],null,null),(e()(),r.qb(48,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(e,n,t){var l=!0,r=e.component;return"click"===n&&(l=!1!==r.send(r.text,!1)&&l),l}),o.V,o.d)),r.pb(49,49152,null,0,s.l,[r.h,r.k,r.x],{disabled:[0,"disabled"]},null),(e()(),r.qb(50,0,null,0,1,"ion-icon",[["name","send"],["size","large"]],null,null,null,o.ib,o.q)),r.pb(51,49152,null,0,s.D,[r.h,r.k,r.x],{name:[0,"name"],size:[1,"size"]},null),(e()(),r.qb(52,0,[[2,0],["fileUploadWeb",1]],null,0,"input",[["hidden",""],["type","file"]],null,[[null,"change"]],(function(e,n,t){var l=!0;return"change"===n&&(l=!1!==e.component.returnFile(t.target.files[0])&&l),l}),null,null))],(function(e,n){var t=n.component;e(n,13,0,"/"),e(n,14,0,"/"),e(n,16,0,""),e(n,18,0,"ios"),e(n,20,0,t.loaded,r.Cb(n,21)),e(n,31,0,"camera","large"),e(n,35,0,"call","large"),e(n,41,0,t.text),e(n,44,0,r.Lb(n,44,0,r.Cb(n,45).transform("YourMessage")),"1"),e(n,49,0,!t.text.trim().length||!t.loaded),e(n,51,0,"send","large")}),(function(e,n){e(n,9,0,n.component.userName),e(n,38,0,r.Cb(n,43).ngClassUntouched,r.Cb(n,43).ngClassTouched,r.Cb(n,43).ngClassPristine,r.Cb(n,43).ngClassDirty,r.Cb(n,43).ngClassValid,r.Cb(n,43).ngClassInvalid,r.Cb(n,43).ngClassPending)}))}var W=r.mb("app-messages",R,(function(e){return r.Mb(0,[(e()(),r.qb(0,0,null,null,1,"app-messages",[],null,null,null,z,T)),r.pb(1,49152,null,0,R,[O.a,p.a,f.a,x.a,r.x,r.h,y.a,s.Ib,k.a,C.a,_.a,s.a,w.a,M.a,s.Fb,s.Eb,S],null,null)],null,null)}),{},{},[]),H=t("jQxp"),L=t("bOtU"),G=function e(){_classCallCheck(this,e)},$=t("jbVo");t.d(n,"MessagesPageModuleNgFactory",(function(){return V}));var V=r.nb(i,[],(function(e){return r.zb([r.Ab(512,r.j,r.Y,[[8,[a.a,W,H.a]],[3,r.j],r.v]),r.Ab(4608,u.n,u.m,[r.s,[2,u.y]]),r.Ab(4608,c.j,c.j,[]),r.Ab(4608,s.c,s.c,[r.x,r.g]),r.Ab(4608,s.Fb,s.Fb,[s.c,r.j,r.p]),r.Ab(4608,s.Jb,s.Jb,[s.c,r.j,r.p]),r.Ab(4608,b.i,b.h,[]),r.Ab(4608,b.d,b.g,[]),r.Ab(4608,b.k,b.e,[]),r.Ab(4608,b.c,b.b,[]),r.Ab(4608,b.m,b.m,[b.n,b.i,b.d,b.k,b.c,b.o,b.q,b.p,b.a]),r.Ab(5120,L.h,L.g,[L.a,L.e]),r.Ab(4608,L.b,L.b,[L.h]),r.Ab(1073742336,u.c,u.c,[]),r.Ab(1073742336,c.i,c.i,[]),r.Ab(1073742336,c.c,c.c,[]),r.Ab(1073742336,s.Cb,s.Cb,[]),r.Ab(1073742336,O.p,O.p,[[2,O.u],[2,O.n]]),r.Ab(1073742336,G,G,[]),r.Ab(1073742336,b.j,b.j,[]),r.Ab(1073742336,L.f,L.f,[]),r.Ab(1073742336,$.a,$.a,[]),r.Ab(1073742336,i,i,[]),r.Ab(1024,O.l,(function(){return[[{path:"",component:R}]]}),[]),r.Ab(256,b.q,void 0,[]),r.Ab(256,b.o,void 0,[]),r.Ab(256,b.p,void 0,[]),r.Ab(256,b.a,void 0,[]),r.Ab(256,L.e,void 0,[]),r.Ab(256,L.a,L.i,[])])}))}}]);